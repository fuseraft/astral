import "@kiwi/fileio"

@files = []

for @path in fileio::glob("./**/*.kiwi") do
  @content = fileio::read(@path)
  @hash = {"path": @path, "content": @content}
  @files << @hash
end

@output_path = "output.txt"
if fileio::exists(@output_path)
  fileio::remove(@output_path)
end

for @file in @files do
  fileio::writeln(@output_path, "#" + @file["path"])
  fileio::writeln(@output_path, @file["content"])
end